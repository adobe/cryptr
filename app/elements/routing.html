<script src="../bower_components/page/page.js"></script>
<script>
	window.addEventListener('WebComponentsReady', function() {

		function closeDrawer(ctx, next) {
			app.closeDrawer();
			next();
		}

		// Routes
		page('*', closeDrawer, function(ctx, next) {
			next();
		});

		page('/', function() {
			app.route = 'home';
		});

		page(app.baseUrl, function() {
			app.route = 'home';
		});

		page('/create', function() {
			app.route = 'create';
		});

		page('/folder/*', function(data) {
			app.route = 'folder/' + data.params[0];
		});
		page('/secret/*', function(data) {
			app.route = 'secret/' + data.params[0];
		});

		page('/search', function() {
			app.route = 'search';
		});

		// 404
		page('*', function() {
			app.$.toast.text = 'Can\'t find: ' + window.location.href  + '. Redirected you to Home Page';
			app.$.toast.show();
			page.redirect(app.baseUrl);
		});

		page({
			hashbang: true
		});
	});
</script>
