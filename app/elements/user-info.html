<dom-module id="user-info">
	<template>
		<style>
			.name {
				padding-right:16px;
				padding-left: 5px;
			}
		</style>

        <paper-item style="-webkit-app-region: no-drag;">
            <iron-icon icon="account-circle" style="color: #888"></iron-icon>
            <span class="noselect name">{{upperUser}}</span>
            <paper-button raised on-click="_logoutUser">Logout</paper-button>
        </paper-item>

	</template>

	<script>
		(function() {
			'use strict';
			Polymer({
				is: 'user-info',
				properties: {
					username: {
						type: String
					},
					url: {
						type: String
					},
                    upperUser: {
                        type: String,
                        computed: '_computeToUpper(username)'
                    }
				},
                _computeToUpper: function(username) {
                    return this.username.toUpperCase();
                },
                _logoutUser: function() {
					// This function simply erases the token from memory, effectively erasing all memory of
					// the token until it expires naturally. An alternative could be to call the revoke-self
					// endpoint, however this may have unintended consequences.
					app.header = {};
					document.querySelector('#checkStatus').generateRequest();
                }
			});
		})();
	</script>
</dom-module>
